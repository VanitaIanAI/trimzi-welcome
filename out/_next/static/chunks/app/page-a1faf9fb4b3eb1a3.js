(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{496:function(e,t,s){Promise.resolve().then(s.bind(s,7588))},7588:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var l=s(7437),a=s(6648),n=s(7138),r=s(2265);function i(e){let{children:t,min:s=2e3}=e,[a,n]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let e=setTimeout(()=>n(!1),s);return()=>clearTimeout(e)},[s]),a)?(0,l.jsx)("div",{className:"splash-screen",children:(0,l.jsx)("div",{className:"logo",children:(0,l.jsx)("img",{src:"/logo-trimzi.svg",alt:"TrimZi",width:120,height:120})})}):(0,l.jsx)(l.Fragment,{children:t})}function o(e){let{open:t,onClose:s,onSubmit:a}=e,[n,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null);if(!t)return null;async function x(e){e.preventDefault(),h(null),u(!0);try{await a(n,o)}catch(e){h((null==e?void 0:e.message)||"Something went wrong"),u(!1);return}u(!1)}return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"w-[92%] max-w-sm rounded-2xl bg-white border border-border p-5 shadow-xl",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-brown mb-3",children:"Sign in with Email"}),(0,l.jsxs)("form",{onSubmit:x,className:"space-y-3",children:[(0,l.jsxs)("label",{className:"block",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Email"}),(0,l.jsx)("input",{type:"email",required:!0,className:"mt-1 w-full border border-border rounded-lg px-3 py-2 outline-none focus:border-brown",value:n,onChange:e=>i(e.target.value),placeholder:"you@example.com"})]}),(0,l.jsxs)("label",{className:"block",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Password"}),(0,l.jsx)("input",{type:"password",required:!0,className:"mt-1 w-full border border-border rounded-lg px-3 py-2 outline-none focus:border-brown",value:o,onChange:e=>d(e.target.value),placeholder:"••••••••"})]}),m&&(0,l.jsx)("p",{className:"text-sm text-red-600",children:m}),(0,l.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,l.jsx)("button",{type:"button",onClick:s,className:"flex-1 py-2 rounded-lg border border-border text-charcoal",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:c,className:"flex-1 py-2 rounded-lg bg-brown text-white font-semibold disabled:opacity-60",children:c?"Signing in…":"Continue"})]})]})]})})}var d=s(5236),c=s(303),u=s(9842);let m=(0,d.ZF)({apiKey:"AIzaSyB8EXanvJYQly7gUSRPy45HF30Rz_3OfHs",authDomain:"trimzi.firebaseapp.com",projectId:"trimzi",storageBucket:"trimzi.firebasestorage.app",messagingSenderId:"444507823321",appId:"1:444507823321:web:80cc7bcc7c1e614aacf2c8",measurementId:"G-K3ZBJQSKWB"}),h=(0,c.v0)(m);(0,c.Fb)(h,c.a$);let x=(0,u.ad)(m),b=new c.hJ;async function g(){var e,t,s;let l=(await (0,c.rh)(h,b)).user;await (0,u.pl)((0,u.JU)(x,"users",l.uid),{uid:l.uid,email:null!==(e=l.email)&&void 0!==e?e:null,displayName:null!==(t=l.displayName)&&void 0!==t?t:"",photoURL:null!==(s=l.photoURL)&&void 0!==s?s:"",onboardingCompleted:!0,lastLoginAt:(0,u.Bt)(),createdAt:(0,u.Bt)()},{merge:!0})}async function f(e,t){try{let s=await (0,c.e5)(h,e,t);await (0,u.pl)((0,u.JU)(x,"users",s.user.uid),{lastLoginAt:(0,u.Bt)(),onboardingCompleted:!0},{merge:!0})}catch(s){if((null==s?void 0:s.code)==="auth/user-not-found"){let s=await (0,c.Xb)(h,e,t);await (0,u.pl)((0,u.JU)(x,"users",s.user.uid),{uid:s.user.uid,email:e,displayName:"",photoURL:"",onboardingCompleted:!0,createdAt:(0,u.Bt)(),lastLoginAt:(0,u.Bt)()},{merge:!0})}else throw s}}function p(){let[e,t]=(0,r.useState)(!1);async function s(){try{await g(),window.location.href="/home"}catch(e){alert("Google sign-in failed. Please try again."),console.error(e)}}async function d(e,s){await f(e,s),t(!1),window.location.href="/home"}return(0,l.jsxs)(i,{min:3e3,children:[(0,l.jsxs)("main",{className:"min-h-dvh bg-ivory flex flex-col items-center justify-between px-6 py-10",children:[(0,l.jsx)("div",{}),(0,l.jsxs)("section",{className:"w-full max-w-sm text-center",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)(a.default,{src:"/logo-trimzi.svg",alt:"TrimZi",width:96,height:96,priority:!0}),(0,l.jsx)("h1",{className:"text-brown text-4xl font-semibold leading-none",children:"TrimZi"})]}),(0,l.jsxs)("p",{className:"mt-6 text-charcoal/80 text-xl leading-snug",children:["Premium grooming,",(0,l.jsx)("br",{})," at your fingertips."]}),(0,l.jsxs)("div",{className:"mt-10 flex flex-col gap-4",children:[(0,l.jsxs)("button",{className:"w-full py-3 rounded-2xl bg-white border border-border shadow-sm text-charcoal font-medium flex items-center justify-center gap-3",onClick:s,children:[(0,l.jsx)(a.default,{src:"/icons/google.svg",alt:"Google",width:20,height:20}),"Continue with Google"]}),(0,l.jsx)("button",{className:"w-full py-3 rounded-2xl bg-brown text-white font-semibold shadow-sm",onClick:()=>t(!0),children:"Continue with Email"}),(0,l.jsx)(n.default,{href:"/home",className:"w-full py-3 rounded-2xl bg-white/70 border border-border text-brown font-semibold text-center",children:"Continue as Guest"})]})]}),(0,l.jsx)("div",{})]}),(0,l.jsx)(o,{open:e,onClose:()=>t(!1),onSubmit:d})]})}}},function(e){e.O(0,[15,609,974,67,971,23,744],function(){return e(e.s=496)}),_N_E=e.O()}]);